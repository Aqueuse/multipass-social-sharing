{% extends "base.html" %}

{% block stylesheet %}
    <link rel="stylesheet" href="{{ baseURL }}/static/css/tasks.css" xmlns="http://www.w3.org/1999/html">
{% endblock %}

{% block navigation %}
    <div class="navigation">
        <button><a style="text-decoration: none;" href="/account">Account</a></button>
        <button><a style="text-decoration: none;" href="/logout">Logout</a></button>
    </div>
{% endblock %}

{% block content %}
<script src="{{ baseURL }}/static/js/tasks.js"></script>

{% if dict_tasks_summary|length == 0 %}
    {% include 'newTask.html' %}
{% else %}
    {% for task in dict_tasks_summary.tasks %}
    <div class="task-block">
        <div class=task-resume>
            <form class=time-task-form enctype="multipart/form-data" method="post">
                <input type="hidden" name="id" value="{{ task.id }}">
                <div style="display: flex; flex-direction: row">
                    <a class=task-field id="task-{{ task.id }}-name-a" style="display: block">{{ task.taskname }}</a>
                    <textarea id="task-{{ task.id }}-name-area" class="task-field" style="resize: none; display: none" wrap="off" placeholder="task name" name="taskname">{{ task.taskname }}</textarea>
                    <img class="edit-task-name-image" onclick="editTaskname({{ task.id }})" src="/static/images/pen.svg">
                </div>
                <input type=datetime-local name=date value="{{ task.date }}">
                <label>Repetition :
                    <select id="{{ task.id }}-repetition" name="repetition_frequency" onchange="showPeriods('{{ task.id }}')">
                        <option value="{{ task.repetition.frequency }}" selected>current : {{ task.repetition.frequency }}</option>
                        <option value="daily">daily</option>
                        <option value="weekly">weekly</option>
                        <option value="monthly">monthly</option>
                        <option value="custom">custom</option>
                    </select>
                </label>
                <div class="period-selecter">
                    <div style="display:none;" id="{{ task.id }}-months">
                        <span style="background-color: lightsteelblue" id="{{ task.id }}-span-JAN" class="round-span" onclick="switchElement('{{ task.id }}', 'months', 'JAN')">JAN</span>
                        <span style="background-color: lightsteelblue" id="{{ task.id }}-span-FEB" class="round-span" onclick="switchElement('{{ task.id }}', 'months', 'FEB')">FEB</span>
                        <span style="background-color: lightsteelblue" id="{{ task.id }}-span-MAR" class="round-span" onclick="switchElement('{{ task.id }}', 'months', 'MAR')">MAR</span>
                        <span style="background-color: lightsteelblue" id="{{ task.id }}-span-APR" class="round-span" onclick="switchElement('{{ task.id }}', 'months', 'APR')">APR</span>
                        <span style="background-color: lightsteelblue" id="{{ task.id }}-span-MAY" class="round-span" onclick="switchElement('{{ task.id }}', 'months', 'MAY')">MAY</span>
                        <span style="background-color: lightsteelblue" id="{{ task.id }}-span-JUN" class="round-span" onclick="switchElement('{{ task.id }}', 'months', 'JUN')">JUN</span>
                        <span style="background-color: lightsteelblue" id="{{ task.id }}-span-JUL" class="round-span" onclick="switchElement('{{ task.id }}', 'months', 'JUL')">JUL</span>
                        <span style="background-color: lightsteelblue" id="{{ task.id }}-span-AUG" class="round-span" onclick="switchElement('{{ task.id }}', 'months', 'AUG')">AUG</span>
                        <span style="background-color: lightsteelblue" id="{{ task.id }}-span-SEP" class="round-span" onclick="switchElement('{{ task.id }}', 'months', 'SEP')">SEP</span>
                        <span style="background-color: lightsteelblue" id="{{ task.id }}-span-OCT" class="round-span" onclick="switchElement('{{ task.id }}', 'months', 'OCT')">OCT</span>
                        <span style="background-color: lightsteelblue" id="{{ task.id }}-span-NOV" class="round-span" onclick="switchElement('{{ task.id }}', 'months', 'NOV')">NOV</span>
                        <span style="background-color: lightsteelblue" id="{{ task.id }}-span-DEC" class="round-span" onclick="switchElement('{{ task.id }}', 'months', 'DEC')">DEC</span>
                        <input id="{{ task.id }}-task-months" type=hidden name="months" value="{{ task.repetition.months }}">
                    </div>
                </div>
                <div class="period-selecter">
                    <div style="display:none;" id="{{ task.id }}-days">
                        <label><span style="background-color: lightsteelblue" id="{{ task.id }}-span-MO" class="round-span" onclick="switchElement('{{ task.id }}', 'days', 'MO')">MO</span></label>
                        <label><span style="background-color: lightsteelblue" id="{{ task.id }}-span-TU" class="round-span" onclick="switchElement('{{ task.id }}', 'days', 'TU')">TU</span></label>
                        <label><span style="background-color: lightsteelblue" id="{{ task.id }}-span-WE" class="round-span" onclick="switchElement('{{ task.id }}', 'days', 'WE')">WE</span></label>
                        <label><span style="background-color: lightsteelblue" id="{{ task.id }}-span-TH" class="round-span" onclick="switchElement('{{ task.id }}', 'days', 'TH')">TH</span></label>
                        <label><span style="background-color: lightsteelblue" id="{{ task.id }}-span-FR" class="round-span" onclick="switchElement('{{ task.id }}', 'days', 'FR')">FR</span></label>
                        <label><span style="background-color: lightsteelblue" id="{{ task.id }}-span-SA" class="round-span" onclick="switchElement('{{ task.id }}', 'days', 'SA')">SA</span></label>
                        <label><span style="background-color: lightsteelblue" id="{{ task.id }}-span-SU" class="round-span" onclick="switchElement('{{ task.id }}', 'days', 'SU')">SU</span></label>
                        <input id="{{ task.id }}-task-days" type=hidden name="days" value="{{ task.repetition.days }}">
                    </div>
                </div>
            <button class="form-submit-button" formaction="/datetime/edit" >save</button>
            </form>
            <button type="submit" formaction="task/delete">❌</button>
            <div class="resume-expand-logo">
                <div id="resume-social-networks-icons" style="display:block;">
                {% for task in dict_tasks_summary.tasks %}
                    {% if "facebook" in task %}
                        <img class="resume-social-networks-icons" src="/static/images/social_networks/facebook.svg">
                    {% else %}
                        + <img class="resume-social-networks-icons" src="/static/images/social_networks/facebook.svg">
                    {% endif %}
                    {% if "twitter" in task %}
                        <img class="resume-social-networks-icons" src="/static/images/social_networks/twitter.svg">
                    {% else %}
                        + <img class="resume-social-networks-icons" src="/static/images/social_networks/twitter.svg">
                    {% endif %}
                    {% if "instagram" in task %}
                        <img class="resume-social-networks-icons" src="/static/images/social_networks/instagram.svg">
                    {% else %}
                        + <img class="resume-social-networks-icons" src="/static/images/social_networks/instagram.svg">
                    {% endif %}
                {% endfor %}
                </div>
            </div>
            <br><br>
                <button type="button" class="show-tasks-button" id="task-{{ task.id }}-button" onclick="showHideAllTasks('{{ task.id }}')">◁</button>
            <div id="task-{{ task.id }}-expanded" class="task-expanded" style="display: none">
                {% include 'socialNetworks/facebookSubtask.html' %}
                {% include 'socialNetworks/instagramSubtask.html' %}
                {% include 'socialNetworks/twitterSubtask.html' %}
            </div>
        </div>
        {% endfor %}
    {% endif %}
</div>
{% endblock %}


